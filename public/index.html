<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Somu's Family</title>
<link rel="shortcut icon" href="images/family.ico" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" />
<style>
	#divchat {
       bottom: 10px;
       right: 0;
       position: fixed;
       z-index: 1000;
  }
	#divdesignedby {
       bottom: 0;
       right: 0;
       position: fixed;
       z-index: 1000;
  }
  #divphotos {
      bottom: 350px;
      right: 0;
      position: fixed;
      z-index: 1000;
      overflow-y: scroll;
      max-height: 50%;
  }
</style>
</head>
<body>
    <script src="https://www.gstatic.com/firebasejs/5.5.1/firebase.js"></script>
    <script src="https://www.somu.co.in/lib/detect.js"></script>

    <script src="https://www.gstatic.com/firebasejs/5.5.1/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyAUGgozJYcjWp-SX4QTRKnqSpiULHxZie8",
        authDomain: "somu-website.firebaseapp.com",
        databaseURL: "https://somu-website.firebaseio.com",
        projectId: "somu-website",
        storageBucket: "somu-website.appspot.com",
        messagingSenderId: "176778291160"
      };
      firebase.initializeApp(config);
    </script>
    <script>
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function() {
        alert('readystate:' + this.readyState + '; status:' + this.status + '; statusText:' + this.statusText + '; responseText:' + this.responseText);
          /*
          alert('readystate:' + this.readyState);
          alert('status:' + this.status);
          alert(this.statusText);
          alert(this.responseText);
          */
          if (this.readyState === 4 && this.status === 200) {
              //document.getElementById("demo").innerHTML = this.responseText;
              alert(this.responseText);
          }
        };
      function sendMsgToBot(strProjectID, strSessionID, strQuery, strLangCode){
        
        try{
          var addMessage = firebase.functions().httpsCallable('addMessage');
          alert(1);
          addMessage().then(function(result) {
            // Read result of the Cloud Function.
            alert(2);
            var sanitizedMessage = result.data.text;
            alert(sanitizedMessage);
          }).catch(function(cloudFuncErr){
            alert(err);
          });
        }catch(err){
          alert(err);
        }
        

        
        //xhttp.open("POST", "https://us-central1-booming-cosine-188305.cloudfunctions.net/sendMessageToBot", true);
        //xhttp.open("POST", "https://us-central1-somu-website.cloudfunctions.net/addMessage", true);
        //xhttp.open("POST", "tmp.html", true);
        //xhttp.setRequestHeader("Content-Type", "application/json");
        //xhttp.setRequestHeader("my-header", "my header value");
        //xhttp.withCredentials = true;
        //xhttp.send();
         
      }
    </script>
    
    <script>
      var photosRef =  firebase.database().ref("mydb/tmp");
      photosRef.orderByKey().on("value", function(snapshot) {
        if(snapshot!=null){
          var strPhotos = snapshot.val();
          var strImages = '';
          let photosDiv = document.getElementById('divphotos');
          photosDiv.innerHTML="";
          var strPhoto = strPhotos.split(",");
          for (var i = 0; i < strPhoto.length; i++){
            if(strPhoto[i].trim()!==''){
              strImages = strImages + "<img width='50' height='50' src='https://www.somu.co.in/images/photos/" + strPhoto[i] + ".jpg'/><br>";
            }
          }
          photosDiv.innerHTML = strImages;
        }
      });
    </script>

<div id="wrapper">
  <h1>Our Family</h1>
  <div id="family"></div>
  <div id="head-top"></div>
  <div id="head-right"></div>
  <div id="nav">
    <ul>
      <li><a href="#">Home</a></li>
      <li><a href="#">About us</a></li>
      <li><a href="#">Photo gallery</a></li>
      <li><a href="#">Contact us</a></li>
    </ul>
    <div id="nav-bot"></div>
  </div>
  <div id="body">
    <div class="i">
      <h2 class="shallow"><strong>Welcome</strong> to our family</h2>
      <p>we are Somu family.  We are 5 in number.  A happy family.</p>
      <p>We have mixture of talent like doctor, engineer, designers, students, dancers, martial arts etc. etc..</p>
      <p class="more"><a href="#">more...</a></p>
      <h2 class="shallow"><strong>Family</strong> photo gallery</h2>
      <p><img src="images/gallery.jpg" width="233" height="161" alt="Gallery" class="left" /></p>
      <div id="view">
        <p class="dark"><a href="#">VIEW OUR</a></p>
        <p class="orange"><a href="#">PHOTO<br />
          GALLERY</a></p>
      </div>
      <div class="clear"></div>
      <h2><strong>Family</strong> functions</h2>
      <ul class="orange-bullet">
        <li>House warming ceremony</li>
        <li>Elder daughter's toddling function</li>
      </ul>
      <h2 class="orange"><strong>Family</strong> fun &amp; travel</h2>
      <div id="funtravel"> <img src="images/pic_1.jpg" width="95" height="116" alt="Pic 1" class="left" />
        <div id="collect">
          <p class="dark">COLLECT OUR</p>
          <p class="orange">FUN &amp; TRAVELBOOK</p>
          <p class="other">Travelogue</p>
        </div>
      </div>
      <div id="funtravel">
        <div id="divchat">
            <input type="text" id="text_msg" name="text_msg">
            <input type="button" id="send_msg" name="send_msg" value="send" onclick="sendMsgToBot('booming-cosine-188305','1234567890', text_msg.value,'en-US')">
        <div id="divdesignedby">designed by <a href="mailto:krishnasomu@yahoo.com">krishna somu</a></div>
        <!--
        <iframe width="280" height="330" src="https://console.dialogflow.com/api-client/demo/embedded/d6eee622-edf2-404b-aa8d-ef0316d6af22"></iframe>
        -->
        <div id="divphotos">
         <img src="https://www.somu.co.in/images/photos/1.jpg">
        </div>
		</div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
